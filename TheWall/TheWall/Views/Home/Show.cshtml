@using Microsoft.CodeAnalysis.Differencing
@model List<Dictionary<string,object>>




<div class="m-5 p-5">
    <h2>Welcome, @ViewBag.name!</h2>

    @foreach (var message in Model)
    {
        <div class="card w-25 p-2" style="width: 18rem">

            <p class="card-body">@message["message"] </p>
            <p class="blockquote-footer"><i><small><b>@message["first_name"] @message["last_name"] @Convert.ToDateTime(message["created_at"]).ToString("f")</b></small></i></p>

            <div style="display: inline-block;">
                <a asp-action="Comment" asp-route-id=@message["id"] class="btn btn-primary btn-sm col-md-2 tiny">Reply</a>

                @if (ViewBag.id == Convert.ToInt32(message["user_id"]))
                {
                    <a asp-action="Delete" class="btn btn-danger btn-sm col-md-2 float-right tiny">Delete</a>
                    if (DateTime.Now - Convert.ToDateTime(message["created_at"]) < TimeSpan.FromMinutes(30))
                    {
                        <a asp-action="Edit" asp-route-id=@message["id"] class="btn btn-warning btn-sm col-md-2 float-right tiny">Edit</a>
                    }

                }

            </div>
        </div>
        @message["comment"]
    }
    <div style="margin-top: 100px">
        <form asp-action="Create" method="post">
            <p class="message">Add a new message to the wall:</p>
            <textarea cols="50" rows="4" name="message"></textarea>
            <button class="btn btn-sm btn-primary">Post</button>
        </form>
    </div>
</div>